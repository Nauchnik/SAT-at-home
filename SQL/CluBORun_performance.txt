1. Создаём в базе таблицу:

CREATE TABLE CLUSTER_CREDIT

(

    SNAPSHOT_TIME         DATETIME,

    CRYSTAL_SPIRIT_CREDIT DOUBLE,

    ENDURANCE_CREDIT      DOUBLE,

    OTHERS_CREDIT         DOUBLE

);

2. Делаем скрипт, который будет вызываться из cron-а и выполнять следующий запрос:

INSERT INTO CLUSTER_CREDIT(SNAPSHOT_TIME, CRYSTAL_SPIRIT_CREDIT, ENDURANCE_CREDIT, OTHERS_CREDIT)

SELECT

    NOW() AS SNAPSHOT_TIME,

    SUM(CASE WHEN NAME = 'Crystal Spirit' THEN TOTAL_CREDIT ELSE 0 END) AS CRYSTAL_SPIRIT_CREDIT,

    SUM(CASE WHEN NAME = 'Endurance' THEN TOTAL_CREDIT ELSE 0 END) AS ENDURANCE_CREDIT,

    SUM(CASE WHEN NAME NOT IN('Crystal Spirit','Endurance') THEN TOTAL_CREDIT ELSE 0 END) AS OTHERS_CREDIT

  FROM user;

3. Когда потребуется построить график - по этим данным в Excel сделаем всё, что нужно.

В cron вызов скрипта можно ставить не раз в сутки, а чаще - например 1 раз в 6 часов.